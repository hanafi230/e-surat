<!DOCTYPE html>
<html lang="id">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="../assets/style-login.css" />
	<title>Halaman Login</title>
</head>

<body>
	<form action="/authenticate" method="post" name="login">
		<div class="warp">
			<div class="logo-login">
				<img src="../gambar/Logo.png"/>
				
			</div>
            <hr>

			<div class="judul">
				<h3>LOGIN USER</h3>
			</div>
			<div class="input">
				<label for="input">  Email &nbsp;&nbsp;&nbsp;&nbsp; </label><input type="email" name="email" placeholder="Email" required="required" autofocus value="" onfocus/>
			</div>
			<div class="input">
				<label for="input"> Password </label><input type="password" name="password" placeholder="password" required="required" />
			</div>
			<!-- <p id="danger">{{ $errors->first('email')  }}</p> -->
			<div class="tombol-login">
				<button type="reset">Reset</button>
				<button class="klik">Login</button>
			</div>
			<div class="footer-login">
				<p>&copy E-SURAT 2023</p>
			</div>
		</div>
	</form>
</body>

<script>
	document.login.onsubmit = (e) => {
        e.preventDefault();
        const email = document.login.email.value;
        const password = document.login.password.value;
        fetch("/api/login", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            email,
            password,
          }),
        }).then(async (response) => {
          if (response.ok) {
            location.href = "/";
          } else {
            const message = await response.text();
            alert(message);
          }
        });
      };
</script>
</html>